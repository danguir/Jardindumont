(function(a){var d=a("body"),q=a(yith_wcms.dom.login),x=a(yith_wcms.dom.billing),t=a(yith_wcms.dom.shipping),u=a(yith_wcms.dom.order),v=a(yith_wcms.dom.payment),f=a(yith_wcms.dom.form_actions),y=a(yith_wcms.dom.coupon),z=a(yith_wcms.dom.create_account),D=a(yith_wcms.dom.create_account_wrapper),r=[q,x,t,u,v],w=d.hasClass("logged-in");a(yith_wcms.dom.ship_to_different_address);cookie={form:"yith_wcms_checkout_form",step:"yith_wcms_checkout_current_step"};d.on("updated_checkout yith_wcms_myaccount_order_pay",
    function(b){"updated_checkout"==b.type&&(r[4]=a(yith_wcms.dom.payment));4==f.data("step")&&a(yith_wcms.dom.payment).show();d.trigger("yith_wcms_updated_checkout")});d.hasClass("woocommerce-order-pay")&&d.trigger("yith_wcms_myaccount_order_pay");"yes"==yith_wcms.live_fields_validation&&(a(yith_wcms.dom.checkout_form),d.on("blur","input:radio",function(){var b=a(this),c=b.closest(".form-row"),g=!0;c.is(".validate-required")&&("radio"==b.attr("type")&&(b=b.attr("name"),a("input[name="+b+"]").is(":checked")||
(c.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),g=!1)),g&&c.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated"))}));d.on("yith_wcms_select2",function(b){if(a().select2){var c=function(){a("select.country_select, select.state_select").each(function(){var b={placeholder:a(this).attr("placeholder"),placeholderOption:"first",width:"100%"};a(this).select2(b)})};c();d.bind("country_to_state_changed",
    function(){c()})}});1!=yith_wcms.wc_shipping_multiple&&d.trigger("yith_wcms_select2");a(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li").on("click",function(b){var c=a(this);if(c.hasClass("active"))return!1;b=a(yith_wcms.dom.checkout_timeline).find(yith_wcms.dom.active_timeline).data("step");var g=c.data("step"),d=c.data("step")>b?g-1:c.data("step"),c=c.data("step")>b?f.find(yith_wcms.dom.button_next):f.find(yith_wcms.dom.button_prev);if(0==g&&w)return!1;A(c,b,g,d)});f.find(yith_wcms.dom.button_prev).add(yith_wcms.dom.button_next).on("click",
    function(b){b=a(this);var c=f.data("step");A(b,c,c+1,c-1)});var A=function(b,c,g,d){var e=a(yith_wcms.dom.checkout_timeline);b=b.data("action");var h=f.find(yith_wcms.dom.button_prev),k=f.find(yith_wcms.dom.button_next),m=e.find(".active").data("step"),q=function(a){3==a?y.fadeIn(yith_wcms.transition_duration):y.fadeOut(yith_wcms.transition_duration)};"prev"==b&&1==c?k.val(yith_wcms.skip_login_label):k.val(yith_wcms.next_label);if("yes"==yith_wcms.live_fields_validation&&(0==m||1==m||2==m)&&"next"==
    b){var p=a(yith_wcms.dom.checkout_form),l=0,n=a(yith_wcms.dom.shipping_check);1!=m&&2!=m||p.find(yith_wcms.dom.required_fields_check).trigger("blur");if(1==m||0==m)yith_wcms.is_coupon_email_system_enabled&&(l=a(yith_wcms.dom.day_of_birth),"undefined"!=typeof l&&(n=l.attr("pattern"),n=new RegExp("^"+n+"$","g"),p=l.val(),""!=p&&0==n.test(p)&&l.parent().removeClass("woocommerce-validated").addClass("woocommerce-invalid-required-field").addClass("woocommerce-invalid"))),l=x.find(yith_wcms.dom.wc_invalid_required).size(),
0==z.length||z.is(":checked")||0==l||(l-=D.find(".validate-required").length);else if(2==m){p=n.length;if(0!=p&&n.is(":checked")||0==p&&t.find("input").length)l=t.find(yith_wcms.dom.wc_invalid_required).size();yith_wcms.is_wc_checkout_addons_enabled&&(n=a(yith_wcms.dom.wc_checkout_addons),l+=n.find(yith_wcms.dom.wc_invalid_required).size())}if(0!=l){if(0!=m)return;g=1}}e.find(".active").removeClass("active");"next"==b?(f.data("step",g),r[c].fadeOut(yith_wcms.transition_duration,function(){r[g].fadeIn(yith_wcms.transition_duration);
        q(g)}),a(yith_wcms.dom.timeline_id_prefix+g).toggleClass("active")):"prev"==b&&(f.data("step",d),r[c].fadeOut(yith_wcms.transition_duration,function(){r[d].fadeIn(yith_wcms.transition_duration)}),q(d),a(yith_wcms.dom.timeline_id_prefix+d).toggleClass("active"));c=f.data("step");1==yith_wcms.use_cookie&&Cookies.set(cookie.step,c,{path:"/"});1==c&&1==w||0==w&&(0==c&&1==yith_wcms.checkout_login_reminder_enabled||1==c&&0==yith_wcms.checkout_login_reminder_enabled)?h.fadeOut(yith_wcms.transition_duration):
    h.fadeIn(yith_wcms.transition_duration);4==c?(k.fadeOut(yith_wcms.transition_duration),"yes"==yith_wcms.disabled_prev_button&&h.fadeOut(yith_wcms.transition_duration)):k.fadeIn(yith_wcms.transition_duration)},q=Cookies.get(cookie.form),u=Cookies.get(cookie.step),B=function(){var b=a(".checkout.woocommerce-checkout").serialize();Cookies.set(cookie.form,b,{path:"/"})},C=function(){a("#ship-to-different-address input").on("change",function(a){B()});a(yith_wcms.dom.checkout_form).find(yith_wcms.dom.required_fields_check).on("blur change",
    function(a){B()})},v=function(b,c){if("undefined"!=typeof b){var d=b.split("&"),f;for(f in d){var e=d[f];if("string"==typeof e){var e=e.split("="),h=decodeURIComponent('input[name="'+e[0]+'"]'),h=a(h);if("undefined"!=typeof h){var k=decodeURIComponent(e[1]).replace(/\+/g," ");-1!=yith_wcms.dom.select2_fields.indexOf(e[0])?(e=a("#"+decodeURIComponent(e[0])),e.add(h).val(k),e.is("select")?e.val(k).trigger("change"):e.is("input")&&h.val(k)):-1==e[0].indexOf("_wp")&&k&&("checkbox"==h.prop("type")&&1==
    k?h.prop("checked","checked"):h.val(k))}}}}};1==yith_wcms.use_cookie&&(C(),v(q,u),d.on("country_to_state_changed",function(a,c,d){C()}));if("undefined"!=typeof Cookies.get(cookie.step)&&1==yith_wcms.use_cookie)d.on("updated_checkout yith_wcms_myaccount_order_pay",function(){a(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li#timeline-"+Cookies.get(cookie.step)).trigger("click")});1==yith_wcms.is_order_received_endpoint&&1==yith_wcms.use_cookie&&(Cookies.remove(cookie.form,{path:"/"}),Cookies.remove(cookie.step,
    {path:"/"}))})(jQuery);